Ext.list.ColumnResizer=Ext.extend(Ext.util.Observable,{minPct:0.05,constructor:function(a){Ext.apply(this,a);Ext.list.ColumnResizer.superclass.constructor.call(this)},init:function(a){this.view=a;a.on("render",this.initEvents,this)},initEvents:function(a){a.mon(a.innerHd,"mousemove",this.handleHdMove,this);this.tracker=new Ext.dd.DragTracker({onBeforeStart:this.onBeforeStart.createDelegate(this),onStart:this.onStart.createDelegate(this),onDrag:this.onDrag.createDelegate(this),onEnd:this.onEnd.createDelegate(this),tolerance:3,autoStart:300});this.tracker.initEl(a.innerHd);a.on("beforedestroy",this.tracker.destroy,this.tracker)},handleHdMove:function(h,d){var c=5,b=h.getPageX(),i=h.getTarget("em",3,true);if(i){var g=i.getRegion(),f=i.dom.style,a=i.dom.parentNode;if(b-g.left<=c&&a!=a.parentNode.firstChild){this.activeHd=Ext.get(a.previousSibling.firstChild);f.cursor=Ext.isWebKit?"e-resize":"col-resize"}else{if(g.right-b<=c&&a!=a.parentNode.lastChild.previousSibling){this.activeHd=i;f.cursor=Ext.isWebKit?"w-resize":"col-resize"}else{delete this.activeHd;f.cursor=""}}}},onBeforeStart:function(a){this.dragHd=this.activeHd;return !!this.dragHd},onStart:function(f){var d=this,b=d.view,c=d.dragHd,a=d.tracker.getXY()[0];d.proxy=b.el.createChild({cls:"x-list-resizer"});d.dragX=c.getX();d.headerIndex=b.findHeaderIndex(c);d.headersDisabled=b.disableHeaders;b.disableHeaders=true;d.proxy.setHeight(b.el.getHeight());d.proxy.setX(d.dragX);d.proxy.setWidth(a-d.dragX);this.setBoundaries()},setBoundaries:function(i){var j=this.view,g=this.headerIndex,c=j.innerHd.getWidth(),i=j.innerHd.getX(),b=Math.ceil(c*this.minPct),k=c-b,e=j.columns.length,d=j.innerHd.select("em",true),f=b+i,a=k+i,h;if(e==2){this.minX=f;this.maxX=a}else{h=d.item(g+2);this.minX=d.item(g).getX()+b;this.maxX=h?h.getX()-b:a;if(g==0){this.minX=f}else{if(g==e-2){this.maxX=a}}}},onDrag:function(c){var b=this,a=b.tracker.getXY()[0].constrain(b.minX,b.maxX);b.proxy.setWidth(a-this.dragX)},onEnd:function(h){var f=this.proxy.getWidth(),g=this.headerIndex,k=this.view,c=k.columns,b=k.innerHd.getWidth(),j=Math.ceil(f*k.maxColumnWidth/b)/100,d=this.headersDisabled,l=c[g],i=c[g+1],a=l.width+i.width;this.proxy.remove();l.width=j;i.width=a-j;delete this.dragHd;k.setHdWidths();k.refresh();setTimeout(function(){k.disableHeaders=d},100)}});Ext.ListView.ColumnResizer=Ext.list.ColumnResizer;