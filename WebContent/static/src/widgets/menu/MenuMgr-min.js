Ext.menu.MenuMgr=function(){var g,e,b,d={},a=false,k=new Date();function m(){g={};e=new Ext.util.MixedCollection();b=Ext.getDoc().addKeyListener(27,i);b.disable()}function i(){if(e&&e.length>0){var n=e.clone();n.each(function(o){o.hide()});return true}return false}function f(n){e.remove(n);if(e.length<1){b.disable();Ext.getDoc().un("mousedown",l);a=false}}function j(n){var o=e.last();k=new Date();e.add(n);if(!a){b.enable();Ext.getDoc().on("mousedown",l);a=true}if(n.parentMenu){n.getEl().setZIndex(parseInt(n.parentMenu.getEl().getStyle("z-index"),10)+3);n.parentMenu.activeChild=n}else{if(o&&!o.isDestroyed&&o.isVisible()){n.getEl().setZIndex(parseInt(o.getEl().getStyle("z-index"),10)+3)}}}function c(n){if(n.activeChild){n.activeChild.hide()}if(n.autoHideTimer){clearTimeout(n.autoHideTimer);delete n.autoHideTimer}}function h(n){var o=n.parentMenu;if(!o&&!n.allowOtherMenus){i()}else{if(o&&o.activeChild){o.activeChild.hide()}}}function l(n){if(k.getElapsed()>50&&e.length>0&&!n.getTarget(".x-menu")){i()}}return{hideAll:function(){return i()},register:function(n){if(!g){m()}g[n.id]=n;n.on({beforehide:c,hide:f,beforeshow:h,show:j})},get:function(n){if(typeof n=="string"){if(!g){return null}return g[n]}else{if(n.events){return n}else{if(typeof n.length=="number"){return new Ext.menu.Menu({items:n})}else{return Ext.create(n,"menu")}}}},unregister:function(n){delete g[n.id];n.un("beforehide",c);n.un("hide",f);n.un("beforeshow",h);n.un("show",j)},registerCheckable:function(n){var o=n.group;if(o){if(!d[o]){d[o]=[]}d[o].push(n)}},unregisterCheckable:function(n){var o=n.group;if(o){d[o].remove(n)}},onCheckChange:function(p,q){if(p.group&&q){var s=d[p.group],o=0,n=s.length,r;for(;o<n;o++){r=s[o];if(r!=p){r.setChecked(false)}}}},getCheckedItem:function(p){var q=d[p];if(q){for(var o=0,n=q.length;o<n;o++){if(q[o].checked){return q[o]}}}return null},setCheckedItem:function(p,r){var q=d[p];if(q){for(var o=0,n=q.length;o<n;o++){if(q[o].id==r){q[o].setChecked(true)}}}return null}}}();