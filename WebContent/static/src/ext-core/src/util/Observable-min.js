(function(){var g=Ext.util,i=Ext.each,f=true,h=false;g.Observable=function(){var j=this,k=j.events;if(j.listeners){j.on(j.listeners);delete j.listeners}j.events=k||{}};g.Observable.prototype={filterOptRe:/^(?:scope|delay|buffer|single)$/,fireEvent:function(){var j=Array.prototype.slice.call(arguments,0),l=j[0].toLowerCase(),m=this,k=f,o=m.events[l],r,n,p;if(m.eventsSuspended===f){if(n=m.eventQueue){n.push(j)}}else{if(typeof o=="object"){if(o.bubble){if(o.fire.apply(o,j.slice(1))===h){return h}p=m.getBubbleTarget&&m.getBubbleTarget();if(p&&p.enableBubble){r=p.events[l];if(!r||typeof r!="object"||!r.bubble){p.enableBubble(l)}return p.fireEvent.apply(p,j)}}else{j.shift();k=o.fire.apply(o,j)}}}return k},addListener:function(j,l,k,q){var m=this,p,r,n;if(typeof j=="object"){q=j;for(p in q){r=q[p];if(!m.filterOptRe.test(p)){m.addListener(p,r.fn||r,r.scope||q.scope,r.fn?r:q)}}}else{j=j.toLowerCase();n=m.events[j]||f;if(typeof n=="boolean"){m.events[j]=n=new g.Event(m,j)}n.addListener(l,k,typeof q=="object"?q:{})}},removeListener:function(j,l,k){var m=this.events[j.toLowerCase()];if(typeof m=="object"){m.removeListener(l,k)}},purgeListeners:function(){var l=this.events,j,k;for(k in l){j=l[k];if(typeof j=="object"){j.clearListeners()}}},addEvents:function(m){var l=this;l.events=l.events||{};if(typeof m=="string"){var j=arguments,k=j.length;while(k--){l.events[j[k]]=l.events[j[k]]||f}}else{Ext.applyIf(l.events,m)}},hasListener:function(j){var k=this.events[j.toLowerCase()];return typeof k=="object"&&k.listeners.length>0},suspendEvents:function(j){this.eventsSuspended=f;if(j&&!this.eventQueue){this.eventQueue=[]}},resumeEvents:function(){var j=this,k=j.eventQueue||[];j.eventsSuspended=h;delete j.eventQueue;i(k,function(l){j.fireEvent.apply(j,l)})}};var d=g.Observable.prototype;d.on=d.addListener;d.un=d.removeListener;g.Observable.releaseCapture=function(j){j.fireEvent=d.fireEvent};function e(k,l,j){return function(){if(l.target==arguments[0]){k.apply(j,Array.prototype.slice.call(arguments,0))}}}function b(m,n,j,k){j.task=new g.DelayedTask();return function(){j.task.delay(n.buffer,m,k,Array.prototype.slice.call(arguments,0))}}function c(l,m,k,j){return function(){m.removeListener(k,j);return l.apply(j,arguments)}}function a(m,n,j,k){return function(){var l=new g.DelayedTask(),o=Array.prototype.slice.call(arguments,0);if(!j.tasks){j.tasks=[]}j.tasks.push(l);l.delay(n.delay||10,function(){j.tasks.remove(l);m.apply(k,o)},k)}}g.Event=function(k,j){this.name=j;this.obj=k;this.listeners=[]};g.Event.prototype={addListener:function(n,m,k){var o=this,j;m=m||o.obj;if(!o.isListening(n,m)){j=o.createListener(n,m,k);if(o.firing){o.listeners=o.listeners.slice(0)}o.listeners.push(j)}},createListener:function(n,m,p){p=p||{};m=m||this.obj;var j={fn:n,scope:m,options:p},k=n;if(p.target){k=e(k,p,m)}if(p.delay){k=a(k,p,j,m)}if(p.single){k=c(k,this,n,m)}if(p.buffer){k=b(k,p,j,m)}j.fireFn=k;return j},findListener:function(n,m){var o=this.listeners,k=o.length,j;m=m||this.obj;while(k--){j=o[k];if(j){if(j.fn==n&&j.scope==m){return k}}}return -1},isListening:function(k,j){return this.findListener(k,j)!=-1},removeListener:function(q,p){var o,j,m,r=this,n=h;if((o=r.findListener(q,p))!=-1){if(r.firing){r.listeners=r.listeners.slice(0)}j=r.listeners[o];if(j.task){j.task.cancel();delete j.task}m=j.tasks&&j.tasks.length;if(m){while(m--){j.tasks[m].cancel()}delete j.tasks}r.listeners.splice(o,1);n=f}return n},clearListeners:function(){var m=this,j=m.listeners,k=j.length;while(k--){m.removeListener(j[k].fn,j[k].scope)}},fire:function(){var p=this,o=p.listeners,j=o.length,n=0,k;if(j>0){p.firing=f;var m=Array.prototype.slice.call(arguments,0);for(;n<j;n++){k=o[n];if(k&&k.fireFn.apply(k.scope||p.obj||window,m)===h){return(p.firing=h)}}}p.firing=h;return f}}})();