/*!
 * Extensible 1.0.2
 * Copyright(c) 2010-2012 Extensible, LLC
 * licensing@ext.ensible.com
 * http://ext.ensible.com
 */
Ext.ensible.cal.DayView=Ext.extend(Ext.Container,{ddCreateEventText:Ext.ensible.cal.CalendarView.prototype.ddCreateEventText,ddMoveEventText:Ext.ensible.cal.CalendarView.prototype.ddMoveEventText,showTime:true,showTodayText:true,dayCount:1,enableEventResize:true,ddIncrement:30,minEventDisplayMinutes:30,showHourSeparator:true,viewStartHour:0,viewEndHour:24,scrollStartHour:7,hourHeight:42,hideMode:"offsets",initComponent:function(){this.dayCount=this.dayCount>7?7:(this.dayCount<1?1:this.dayCount);var b=Ext.apply({},this.initialConfig);b.showTime=this.showTime;b.showTodayText=this.showTodayText;b.todayText=this.todayText;b.dayCount=this.dayCount;b.weekCount=1;b.readOnly=this.readOnly;b.ddIncrement=this.ddIncrement;b.minEventDisplayMinutes=this.minEventDisplayMinutes;var c=Ext.applyIf({xtype:"extensible.dayheaderview",id:this.id+"-hd",ownerCalendarPanel:this.ownerCalendarPanel},b);var a=Ext.applyIf({xtype:"extensible.daybodyview",enableEventResize:this.enableEventResize,showHourSeparator:this.showHourSeparator,viewStartHour:this.viewStartHour,viewEndHour:this.viewEndHour,scrollStartHour:this.scrollStartHour,hourHeight:this.hourHeight,id:this.id+"-bd",ownerCalendarPanel:this.ownerCalendarPanel},b);this.items=[c,a];this.addClass("ext-cal-dayview ext-cal-ct");Ext.ensible.cal.DayView.superclass.initComponent.call(this)},afterRender:function(){Ext.ensible.cal.DayView.superclass.afterRender.call(this);this.header=Ext.getCmp(this.id+"-hd");this.body=Ext.getCmp(this.id+"-bd");this.body.on("eventsrendered",this.forceSize,this)},refresh:function(){Ext.ensible.log("refresh (DayView)");this.header.refresh();this.body.refresh()},forceSize:function(){(function(){var a=this.el.up(".x-panel-body"),c=this.el.child(".ext-cal-day-header"),b;if(a&&c){b=a.getHeight()-c.getHeight();this.el.child(".ext-cal-body-ct").setHeight(b-1)}}).defer(10,this)},onResize:function(){this.forceSize();this.refresh.defer(1,this)},doHide:function(){this.header.doHide.apply(this,arguments);this.body.doHide.apply(this,arguments)},getViewBounds:function(){return this.header.getViewBounds()},getStartDate:function(){return this.header.getStartDate()},setStartDate:function(a){this.header.setStartDate(a,true);this.body.setStartDate(a)},renderItems:function(){this.header.renderItems();this.body.renderItems()},isToday:function(){return this.header.isToday()},moveTo:function(a){this.header.moveTo(a);return this.body.moveTo(a,true)},moveNext:function(){this.header.moveNext();return this.body.moveNext(true)},movePrev:function(a){this.header.movePrev();return this.body.movePrev(true)},moveDays:function(a){this.header.moveDays(a);return this.body.moveDays(a,true)},moveToday:function(){this.header.moveToday();return this.body.moveToday(true)},showEventEditor:function(b,a){return Ext.ensible.cal.CalendarView.prototype.showEventEditor.apply(this,arguments)},dismissEventEditor:function(a){return Ext.ensible.cal.CalendarView.prototype.dismissEventEditor.apply(this,arguments)}});Ext.reg("extensible.dayview",Ext.ensible.cal.DayView);